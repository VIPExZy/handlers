const { EmbedBuilder, ButtonBuilder, ButtonStyle, ActionRowBuilder, ChannelType, PermissionsBitField } = require('discord.js');
const { embedcolor } = require('../config.json');
const { clientIdentificator } = require("../config.json") ; // –£–∫–∞–∂–∏—Ç–µ –≤–∞—à clientId

module.exports = {
  init: async (client) => {
    client.on('guildCreate', async (guild) => {
      // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º –±–æ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø
      const channels = guild.channels.cache.filter(channel => 
        channel.type === ChannelType.GuildText && 
        channel.permissionsFor(guild.members.me).has(PermissionsBitField.Flags.SendMessages)
      );

      // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∫–∞–Ω–∞–ª –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
      const randomChannel = channels.random();

      if (!randomChannel) {
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.');
        return;
      }

      // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –∏ —Å—Å—ã–ª–æ–∫
      const addButton = new ButtonBuilder()
        .setStyle(ButtonStyle.Link)
        .setLabel('–ú–æ–π —Å–∞–π—Ç')
        .setURL('https://shiru.ru/');

      const addButton2 = new ButtonBuilder()
        .setStyle(ButtonStyle.Link)
        .setLabel('–Ø –Ω–∞ Top.gg')
        .setURL('https://top.gg/bot/1200794422397378600');

      const addButton3 = new ButtonBuilder()
        .setStyle(ButtonStyle.Link)
        .setLabel('–Ø –Ω–∞ Boticord')
        .setURL('https://boticord.top/bot/1200794422397378600');

      const addButton4 = new ButtonBuilder()
        .setStyle(ButtonStyle.Link)
        .setLabel('–î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω—è')
        .setURL(`https://discord.com/oauth2/authorize?client_id=${clientIdentificator}&permissions=1102464511094&scope=bot`);

      // –°–æ–∑–¥–∞–µ–º action row –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
      const row = new ActionRowBuilder().addComponents(addButton, addButton2, addButton3, addButton4);

      // –°–æ–∑–¥–∞–µ–º embed —Å–æ–æ–±—â–µ–Ω–∏–µ
      const embed = new EmbedBuilder()
        .setColor(embedcolor)
        .setTitle('–ü—Ä–∏–≤–µ—Ç!')
        .setDescription(`–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ –º–µ–Ω—è –Ω–∞ —ç—Ç–æ—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä **${guild.name}**! <a:7122motionlilahello:1223239494283558962>\n\n‚úåÔ∏è –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º Discord –±–æ—Ç–æ–º!\n
          <a:Yellow_gears:1256124202872733698> Shiru —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –≤–∞—à–µ –ø—Ä–µ–±—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–æ–±–Ω—ã–º, —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º, –∞ –µ—â—ë –ø–æ–º–æ—á—å –≤ –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞. –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏:\n
          <:Symbol_Forward_Slash:1256124616464666707> Slash-–∫–æ–º–∞–Ω–¥—ã: –ù–∞—à –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç slash-–∫–æ–º–∞–Ω–¥—ã, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –Ω–∏–º –ø—Ä–æ—Å—Ç—ã–º –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–º. –í–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏ –∫–æ–º–∞–Ω–¥—ã.\n
          <a:tada_animated:1256124889044357120> –í–µ—Å—ë–ª–æ—Å—Ç–∏: –ë–æ—Ç –¥–æ–±–∞–≤–∏—Ç –≤–µ—Å–µ–ª—å—è –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–º–æ—â—å—é –º–∏–Ω–∏-–∏–≥—Ä, –≤–∏–∫—Ç–æ—Ä–∏–Ω –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π.\n
          <:earth:1256125724708835500> –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å: –ë–æ—Ç –≥–æ–≤–æ—Ä–∏—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–∞—Ö, —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.\n
          <:moderator_shield:1256126075319222292> –ú–æ–¥–µ—Ä–∞—Ü–∏—è: –ú–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞.\n
          <:AutoMod:1256126229472481320> –ê–≤—Ç–æ–º–æ–¥–µ—Ä–∞—Ü–∏—è: –ë–æ—Ç —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–∞–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.\n
          <:ChatGPT:1256126409009532938> –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç: AI –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –≤–µ—Å—Ç–∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –±–µ—Å–µ–¥—ã.\n
          <a:moneywings:1256126947298246667> –≠–∫–æ–Ω–æ–º–∏–∫–∞: –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞ –∏ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ –¥–ª—è –ø–æ–æ—â—Ä–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.\n
          <:play:1253420039038828656> –ú—É–∑—ã–∫–∞: –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –º—É–∑—ã–∫–∏ —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞, –í–∫.–ú—É–∑—ã–∫–∞ –∏ –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.\n
          üéâ –†–æ–∑—ã–≥—Ä—ã—à–∏: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞.\n
          üèÜ –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π: –ü–æ–ª—É—á–∞–π—Ç–µ —É—Ä–æ–≤–Ω–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.\n
          üíç –°–≤–∞–¥—å–±—ã: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–≤–∞–¥–µ–±–Ω—ã–µ —Ü–µ—Ä–µ–º–æ–Ω–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.\n
          üíõ –ü—Ä–µ–º–∏—É–º: –î–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –∏ –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–µ.\n
          üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏ –±–æ—Ç–∞—Ö –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–∞–Ω–∞–ª–æ–≤.\n\n
          **__–ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –±–µ—Ç–∞-—Ç–µ—Å—Ç–µ. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.__** <a:PinkShinyHeart:1256127804169256992>`)
        .setFooter({ text: '–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏: support@shiru.ru | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: jianaze' });

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º embed —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–π–Ω—ã–π –∫–∞–Ω–∞–ª
      await randomChannel.send({ embeds: [embed], components: [row] });
    });
  }
};
